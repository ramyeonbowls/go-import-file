package worker

import "go-import-file/internal/model"

type BlockHandler interface {
	Handle(
		fields []string,
		lineNo int,
		job FileJob,
		processID string,
	) error
}

func BuildBlockHandlers(
	ch16 chan<- model.Mprice,
	ch15 chan<- model.MpriceGrp,
	ch01 chan<- model.Mcust,
	ch25 chan<- model.Msku,
	ch02 chan<- model.McustGrp,
	ch05 chan<- model.McustIndus,
	ch20 chan<- model.Msalesman,
	ch43 chan<- model.SlsInv,
	ch35 chan<- model.ArInvoice,
	ch39 chan<- model.ImStkbal,
	ch108 chan<- model.MBackOrder,
	ch103 chan<- model.Mbeat,
	ch44 chan<- model.McustCl,
	ch112 chan<- model.McustInvD,
	ch111 chan<- model.McustInvH,
	ch03 chan<- model.McustType,
	ch102 chan<- model.MDistrict,
	ch46 chan<- model.Mkat,
	ch113 chan<- model.MkplPrice,
	ch105 chan<- model.Mmarket,
	ch110 chan<- model.MPayerTo,
	ch101 chan<- model.MProvince,
	ch19 chan<- model.MRute,
	ch23 chan<- model.MSBrand,
	ch109 chan<- model.MShipTo,
	ch22 chan<- model.MSline,
	ch104 chan<- model.MSubBeat,
	ch47 chan<- model.MSubBrand,
	ch07 chan<- model.MTop,
	ch120 chan<- model.SpProsesDpZdhdr,
	ch121 chan<- model.SpProsesDpZditm,
	ch122 chan<- model.SpProsesDpZddet,
	ch123 chan<- model.SpProsesDpZpmix,
	ch123Promo chan<- model.SpProsesDpZpmix,
	ch124 chan<- model.SpProsesDpZscreg,
	ch125 chan<- model.SpProsesDpZscmix,
	ch126 chan<- model.SpProsesDpZ00001,
	ch130 chan<- model.SpProsesFgZdhdr,
	ch130Promo chan<- model.SpProsesFgZdhdr,
	ch131 chan<- model.SpProsesFgZfrdet,
	ch132 chan<- model.SpProsesFgZfrmix,
) map[string]BlockHandler {

	return map[string]BlockHandler{
		"16":  &Block16Handler{Out: ch16},
		"15":  &Block15Handler{Out: ch15},
		"01":  &Block01Handler{Out: ch01},
		"25":  &Block25Handler{Out: ch25},
		"02":  &Block02Handler{Out: ch02},
		"05":  &Block05Handler{Out: ch05},
		"20":  &Block20Handler{Out: ch20},
		"43":  &Block43Handler{Out: ch43},
		"35":  &Block35Handler{Out: ch35},
		"39":  &Block39Handler{Out: ch39},
		"108": &Block108Handler{Out: ch108},
		"103": &Block103Handler{Out: ch103},
		"44":  &Block44Handler{Out: ch44},
		"112": &Block112Handler{Out: ch112},
		"111": &Block111Handler{Out: ch111},
		"03":  &Block03Handler{Out: ch03},
		"102": &Block102Handler{Out: ch102},
		"46":  &Block46Handler{Out: ch46},
		"113": &Block113Handler{Out: ch113},
		"105": &Block105Handler{Out: ch105},
		"110": &Block110Handler{Out: ch110},
		"101": &Block101Handler{Out: ch101},
		"19":  &Block19Handler{Out: ch19},
		"23":  &Block23Handler{Out: ch23},
		"109": &Block109Handler{Out: ch109},
		"22":  &Block22Handler{Out: ch22},
		"104": &Block104Handler{Out: ch104},
		"47":  &Block47Handler{Out: ch47},
		"07":  &Block07Handler{Out: ch07},
		"120": &Block120Handler{Out: ch120},
		"121": &Block121Handler{Out: ch121},
		"122": &Block122Handler{Out: ch122},
		"123": &Block123Handler{
			OutZpmix: ch123,
			OutFg:    ch123Promo,
		},
		"124": &Block124Handler{Out: ch124},
		"125": &Block125Handler{Out: ch125},
		"126": &Block126Handler{Out: ch126},
		"130": &Block130Handler{
			OutZdhdr: ch130,
			OutFg:    ch130Promo,
		},
		"131": &Block131Handler{Out: ch131},
		"132": &Block132Handler{Out: ch132},
	}
}
